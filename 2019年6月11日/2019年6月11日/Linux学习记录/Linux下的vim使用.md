### 9.1 vi 与 vim
linux下的文字编辑器有很多，包括 `emacs, pico, nano, joe, 与 vim` 等

####  9.1.1 为何要学 vim
因为不同的Unix like的系统都支持vim呀。

### 9.2 vi 的使用
三种模式，分别是`指令模式` `编辑模式` `命令行命令模式` 前两个我用的比较多，最后一个是当按下`:/?`这三个钟的任意一个来触发的，我用的最多的就是`:wq`了。

#### 9.2.1 vi使用举例
特别注意，一般的linux可能已经将`vim`代替`vi`了，所以应该要执行`/bin/vi`来启动`vi`编辑。我的Mac上面的应该是`/usr/bin/vi`。
写点数据并保存退出这种简单操作我还是会的。

#### 9.2.2 按键说明
一般模式可用的常见指令。

上下左右就直接用方向键按就行了，如果要按三十个下，那可以用`30↓`。
如果想翻页，键盘如果有page up 和 page down那很方便，Mac这种笔记本没有这些就需要control +f/b来翻页了。
移动半页这种操作意义不大，不记了。
`+` `-`这两个分别是移动到非空字符的下/上一列
`20空格`相当于按了20下空格。
`0`移动到这一行最前面
`$`移动到这一行最后面
`G`移动到文件最后一行
`gg`移动到第一列
`10G`移动到第十行

`/word`查找光标后的word。n是查找下一个，N是查找上一个。
`:n1,n2s/word1/word2/g`在n1和n2之间查找word1并且替换成word2
`:1,$s/word1/word2/g`通篇查找替代。最后加c可以让每次都确认。

`x`向后删除一个，向前面删除就是backspace就行了。
`dd`删除一行。
`d1G`删除光标前面的所有，`dG`删除光标后面的所有。
复制就是变d变成y。
`u`相当于ctrl+z
`ctrl+r`相当ctrl+y
`p`为粘贴。只是我可以到编辑模式下复制粘贴呀。所以我觉得意义不大。
`.`重复上一次操作。

插入模式一般用`A`可以到最后一个字符。比较方便。`r`则是进入取代模式。

最后是命令行模式。
`ZZ`，如果文件没动过，那就不存储离开，否则就是相当于`:wq`。注意这个`ZZ`是没有冒号的哦。
`:! command`暂时离开vim去执行命令。
`:w [filename]`另存为。

上述那么多我觉得掌握就差不多了的。

#### 9.2.3 自己练习
其实实际项目来几个就行了。

#### 9.2.4 vim的救援
其实这块在做ctf的时候遇到过。大致意思就是当你在编辑一个文件的时候断电了怎么办。其实vim会在原来的地方多出一个.filename.swp的文件，就跟word一样。你要是出事了这个文件是可以用来救援的。具体操作是按ctrl+z让vim在后台工作，然后kill它即可。

所以当继续去vim操作的时候就会有警告信息了。并且提供了两个主要的原因和解决方案。一是别人也在编辑这个文件，所以你应该找到那个人让他退出，或者如果你只是想看这份文件的话，可以按`o`进入只读模式。显然我们并不是一这种情况。二是`vim`被中断了。我们就是这种情况。这时有两种操作：
* 如果之前并没保存，就按下R让vim来重新载入，然后自己判断。注意这么操作之后保存退出之后手动删除这个.swp文件，不然以后还要每次看到这个界面。
* 如果你不想要了，直接按D删除，这时vim就会正常载入文件。

一共有六个操作：
* Open Read-only 以只读打开
* Edit anyway 我不管我就是要编辑
* Recover 救援
* Delete 删除
* Quit 退出
* Abort 也是退出。。。
吐槽一句，妈的Q和A不是一样吗？？？

### 9.3 vim 的额外功能
基本上就是多了颜色的提示吧。

#### 9.3.1 区块选择
有点像sublime的区块选择功能。
`ctrl+v`来启动这个功能，然后就可以按方向键来进行选择了，然后是y复制，d删除，p粘贴。
`V`是复制每一行，`v`是正常的鼠标复制。

#### 9.3.2 多文件编辑
就是简单的打开多个文件一起编辑而已。用vim同时打开两个或者多个文件，然后用`:n`在这些文件中切换就行了。
也可以`:sp [filename]` 打开多个文件，切换的话，先`ctrl+w`，然后按上下切换。

#### 9.3.4 vim 的挑字补全功能
emmmm 说实话我觉得没什么用。。。

#### 9.3.5 vim 环境设置与记录
你每次用vim来进行操作的时候，都在`~/.viminfo`中有记录的。而如果你要对自己的vim进行配置的话，可以去编辑一下`~/.vimrc`（这个文件默认是不存在的，所以需要手动创建）

### 9.4 其他 vim 使用注意事项
#### 9.4.1 中文编码的问题
主要还是编码问题啦。文本的编码还是推荐utf-8来进行编码，shell的LANG也用utf-8就没有问题了。

#### 9.4.2 DOS 与 Linux 的断行字符
主要是DOS下面的换行和linux下面的换行是不同的，一个是`^M$`，linux是`$`，但是有个很简单的指令，`dos2unix`和`unix2dos`来转换。

> unix2dos -k man_db.conf

选项k是为了保留文件原来的mtime

#### 9.4.3 语系编码转换
> iconv -f 原本编码 -t 新编码 filename [-o newfile]

转换编码啦

这章的主要内容就是学会使用vim就够啦
