### 11.1 什么是正则表达式
正则表达式和通配符有点像，但是又不是一样的，通配符是因为有些指令不支持正则表达式，所以只能用通配符啦。还有一点注意的是，正则表达式和通配符是完全不一样的东西。

### 11.2 基础正则表达式
接下来以支持正则表达式的`grep`来进行练习啦。

####  11.2.1 语系对正则表达式的影响
不同语系对于正则表达式支持并不相同。所以需要注意。有以下的特殊字符需要了解：
* [:alnum:] 英文大小写和数字 **[重要]**
* [:alpha:] 英文大小写  **[重要]**
* [:blank:] 空格和tab
* [:cntrl:] 键盘上面的按键
* [:digit:] 数字  **[重要]**
* [:graph:] 除了空格和tab的字符
* [:lower:] 小写字母  **[重要]**
* [:upper:] 大写字母  **[重要]**
* [:print:] 可以被打印出来的字符
* [:punct:] 标点符号
* [:space:] 能够产生空白的字符 包括回车这一类
* [:xdigit:] 十六进制的字符

#### 11.2.2 grep 的一些进阶选项
`grep [-A] [-B] [--color=auto] '搜寻字串' filename` A就是after，就是在这个的后面几行，B就是befor的意思，就是在这个的前几行。
而且grep是按照一行一行来进行搜索的，所以会整行都显示哦。

#### 11.2.3 基础正则表达式练习
简单的使用就略过了。很简单。接下来是用中括号来模糊搜索。中括号内表示其中的任意一个都可以。注意是只能一个哦。

行首与行尾字符^$。当你相查的东西你希望它在句首出现的时候，就可以用^来表示。比如`grep -n '^the' regular_express.txt`查找the开头的行。
需要注意的是`[^a-z]`和`^[a-z]`是完全不同的，第一个是非小写字母的意思，第二个是小写字母开头的意思。在 [] 内代表“反向选择”，在 [] 之外则代表定 位在行首的意义。行位就是用$符啦。比如以小数点结尾，就可以用`'\.$'`，这里因为小数点有别的意思，需要转义，所以才有这个。如果需要找到不是空行而且不是以`#`开头的呢，因为一般的配置文件里面有空行，而且井号代表的是注释，所以要跳过，可以用`grep -v '^$' file | grep -v '^#'`

任意一个字符与重复字符。通配符是*匹配0到任意多个字符，但是正则表达式跟通配符可完全不同，在正则表达式中`.`表示任意一个字符，而`*`表示的是重复前一个字符0到无穷多次，截然不同的意思。如果我想搜索以g开头，以d结尾的，中间有两个的就可以用`g..d`来搜索。其次是要注意`*`这个，它是可以代表0个的，所以其实`a*`是可以匹配任意的哦。所以`.*`配合在一起就可以指0或者多个的任意字符。

限定连续范围`{}`。首先需要注意的是，在bash中大括号是有特殊作用的，所以要用`\`来转义。如果我要找到两个至少有两个连续o的行，就可以用`o\{2\}`来指定。

#### 11.2.5 sed 工具
很强大的一个工具。具体用法是`sed [-nefr] [动作]`
* -n 只有被sed处理过的才会显示在屏幕上
* -e 直接在命令行界面上
* -f 直接写入文件
* -r 支持延伸型正则表达式
* -i 直接修改读取的文件内容

动作有这些选项：
* a新增
* c取代
* d删除
* i插入
* p打印
* s取代

假设要删除第2到第5行，可以直接`sed '2,5d'`，如果是最后一行就是`sed '2,$d'`啦。新增就是用a啦，简单的就是`sed '2a add content'`就能在第二行后面追加了。如果是要在第二行之前就用i。如果是多行，记得用`\`隔开。

取代也很简单。`sed '2,5c content'`就是把第2行到第5行替换成你的内容。打印就更简单了，只需要指定行数即可。`sed -n '5,7p'`打印第5-7行。注意这个-n，如果不加的话会把这篇全部显示在屏幕上，，而且仅仅对你指定的那几行加上重复而已。

整行取代：
`sed 's/要被取代的字串/新的字串/g'`，跟vim是不是像极了，只不过vim需要指定行数。

注意的是`sed`可以直接对文件进行操作，所以要注意。它的主要用途是如果用vim打开太大的不方便，那不妨直接用`sed`，反正也是一样的操作。记得加上-i操作。

### 11.3 延伸正则表达式
其实掌握了之前的就差不多了，接下来的稍微了解即可啦。

* `+` 表示至少一个或者更多。
* `?` 表示0个或者1个。
* `|` 不是管线，是表示或。
* `()` 找出一组的。
* `()+` 找出多个重复的

### 11.4 文件的格式化与相关处理
#### 11.4.1 格式化打印: printf
其实跟C语言也差不多啦。没用过的参数：
* \a 输出声音
* \b 退格键
* \f 清屏
* \v 垂直的tab键

由于printf并不是管线命令，所以需要`printf '%s' $(cat a.txt)` 这种操作。相当于开了一个子bash去执行了cat，然后把结果返回给printf作为参数。

#### 11.4.2 awk
awk跟sed的最大不同的是，sed是用来处理一行数据的，而awk更倾向于把一行分成数个字段来处理。

`awk '{print $1 "\t" $3}'`表示打印第1列和第3列的意思。这个默认是以空格或者tab键来分割的。`$0`表示的是一整行哦，这个和编程不太一样。
大体上来说就是类似这种的操作：`awk '条件类型1{动作1} 条件类型2{动作2} ...' filename`。至于有哪些，记得查就是了。

#### 11.4.3 文件比对工具
一看到这个就想到自己的`git diff`了。基本用法是`diff [-bBi] from-file to-file`
* b 忽略空白引起的差异
* B 忽略空白行的差异
* i 忽略大小写差异

cmp就只能比较字节了，基本没什么用。。。

patch就很有意思了，因为你可以用diff来比较差异，然后直接用patch来制作补丁升级成最新的版本。

#### 11.4.4 文件打印准备: pr
等要打印的时候再看吧。。。
